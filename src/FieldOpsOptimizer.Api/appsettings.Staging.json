{
  "Serilog": {
    "MinimumLevel": {
      "Default": "Debug",
      "Override": {
        "Microsoft": "Information",
        "Microsoft.AspNetCore": "Warning",
        "Microsoft.EntityFrameworkCore": "Information",
        "System": "Warning",
        "FieldOpsOptimizer": "Debug"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "formatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "/var/log/fieldops/staging/fieldops-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 14,
          "formatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "/var/log/fieldops/staging/errors/fieldops-errors-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "restrictedToMinimumLevel": "Warning",
          "formatter": "Serilog.Formatting.Compact.CompactJsonFormatter, Serilog.Formatting.Compact"
        }
      }
    ]
  },
  "ConnectionStrings": {
    "DefaultConnection": "Host=${DB_HOST:localhost};Database=${DB_NAME:FieldOpsOptimizer_Staging};Username=${DB_USER:fieldops};Password=${DB_PASSWORD};Port=${DB_PORT:5432};Pooling=true;Connection Idle Lifetime=0;Command Timeout=30;"
  },
  "JwtSettings": {
    "Secret": "${JWT_SECRET}",
    "Issuer": "${JWT_ISSUER:FieldOpsOptimizer.Staging}",
    "Audience": "${JWT_AUDIENCE:FieldOpsOptimizer.Api.Staging}",
    "AccessTokenExpiryMinutes": "${JWT_ACCESS_TOKEN_EXPIRY:30}",
    "RefreshTokenExpiryDays": "${JWT_REFRESH_TOKEN_EXPIRY:7}"
  },
  "Database": {
    "EnableMigrationOnStartup": true,
    "EnableSeeding": true,
    "CommandTimeout": 60,
    "EnableRetryOnFailure": true,
    "MaxRetryCount": 3,
    "MaxRetryDelay": "00:00:30"
  },
  "HealthChecks": {
    "Enabled": true,
    "Database": {
      "Enabled": true,
      "Timeout": "00:00:30"
    },
    "MemoryThresholdMB": 1500,
    "DiskSpaceThresholdGB": 2,
    "DatabaseTimeoutSeconds": 20
  },
  "Tracing": {
    "ServiceName": "FieldOpsOptimizer.Api.Staging",
    "ServiceVersion": "1.0.0-staging",
    "OtlpEndpoint": "${OTLP_ENDPOINT}",
    "JaegerEndpoint": "${JAEGER_ENDPOINT}",
    "EnableConsoleExporter": true
  },
  "Monitoring": {
    "EnableRequestLogging": true,
    "EnablePerformanceMetrics": true,
    "SlowRequestThresholdMs": 4000,
    "EnableSensitiveDataLogging": true
  }
}
